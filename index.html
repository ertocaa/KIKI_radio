<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio Kiki Player</title>
    <style>
        /* ... (mantieni lo stile precedente) ... */
    </style>
</head>
<body>
    <div class="player-container">
        <audio id="audioPlayer"></audio>
        
        <div class="metadata-box">
            <div id="trackInfo">ðŸŽ§ Caricamento metadati...</div>
            <div id="showInfo">ðŸ“» Connessione alla radio</div>
        </div>

        <div class="controls">
            <button id="playPauseBtn">â–¶ PLAY</button>
            <input type="range" id="volume" min="0" max="1" step="0.1" value="1">
        </div>
    </div>

    <script>
        // 1. CONFIGURAZIONE OBBLIGATORIA
        const AUDIO_STREAM_URL = "https://radiokiki.out.airtime.pro/radiokiki_a";
        const METADATA_API = "https://proxy.cors.sh/https://radiokiki.airtime.pro/api/live-info";

        // 2. INIZIALIZZAZIONE
        const audio = document.getElementById('audioPlayer');
        audio.src = AUDIO_STREAM_URL;

        // 3. GESTIONE METADATI CON CORS
        async function updateMetadata() {
            try {
                const response = await fetch(METADATA_API, {
                    headers: {
                        'x-cors-api-key': 'temp_654e6c0d4c3e3d00315b4d4b_654e6c3d4c3e3d00315b4d4c'
                    }
                });
                
                const data = await response.json();
                document.getElementById('trackInfo').textContent = `ðŸŽ§ ${data.current.track.creator} - ${data.current.track.title}`;
                document.getElementById('showInfo').textContent = `ðŸ“» ${data.current.show.name}`;
                
            } catch (error) {
                console.error('Errore metadati:', error);
                document.getElementById('trackInfo').textContent = "ðŸ”´ Controllare la connessione";
            }
        }

        // 4. CONTROLLI PLAYER
        document.getElementById('playPauseBtn').addEventListener('click', () => {
            audio[audio.paused ? 'play' : 'pause']();
        });

        // 5. AVVIO
        setInterval(updateMetadata, 5000);
        updateMetadata();
    </script>
</body>
</html>
