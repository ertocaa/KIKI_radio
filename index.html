<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KIKI Radio Player</title>
    <style>
        /* Aggiungi questi nuovi stili */
        .next-show {
            color: #AFFF04;
            font-size: 0.8em;
            margin-top: 10px;
            padding: 8px 0;
            border-top: 1px solid #3A3A3A;
            display: none; /* Nascondi di default */
        }

        .next-label {
            opacity: 0.7;
            margin-right: 5px;
        }

        .next-program {
            font-weight: 500;
        }

        /* Modifica lo stile esistente .metadata-status */
        .metadata-status {
            border-top: none;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="player-container">
        <div class="controls">
            <button id="playPauseBtn">â–¶</button>
            <div class="track-info">
                <div class="track-title" id="trackTitle">KIKI Radio</div>
                <div class="track-artist" id="trackArtist">Caricamento in corso...</div>
            </div>
        </div>
        <div class="next-show" id="nextShow">
            <span class="next-label">Prossimo:</span>
            <span class="next-program" id="nextProgram"></span>
        </div>
        <div class="metadata-status" id="metadataStatus"></div>
    </div>

    <script>
        // Modifica la funzione updateDisplay
        function updateDisplay(data) {
            const currentTrack = data.current?.metadata || {};
            const currentShow = data.currentShow?.[0] || {};
            const nextShow = data.nextShow?.[0] || null;

            // Aggiorna traccia corrente
            elements.trackTitle.textContent = 
                currentTrack.track_title?.trim() || 
                currentShow.name?.trim() || 
                config.defaultTitle;

            elements.trackArtist.textContent = 
                currentTrack.artist_name?.trim() || 
                config.defaultArtist;

            // Aggiorna prossimo programma
            const nextShowElement = document.getElementById('nextShow');
            const nextProgramElement = document.getElementById('nextProgram');
            
            if(nextShow && nextShow.name) {
                const startTime = new Date(nextShow.starts);
                const formattedTime = startTime.toLocaleTimeString('it-IT', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                nextProgramElement.textContent = `${nextShow.name} alle ${formattedTime}`;
                nextShowElement.style.display = 'block';
            } else {
                nextShowElement.style.display = 'none';
            }
        }

        // Aggiungi questi elementi alla sezione "Elementi UI"
        const elements = {
            // ... elementi esistenti ...
            nextShow: document.getElementById('nextShow'),
            nextProgram: document.getElementById('nextProgram')
        };
    </script>
</body>
</html>
